const e=document.querySelector("#output"),t=document.querySelector("#input"),n=document.querySelector(".mainframe"),o=["\\","|","/","―"];let a=!1,r=sessionStorage.getItem("userID");console.log(r);const s=new WebSocket(`ws://salty-bayou-10932.herokuapp.com?id=${r}`);function c(t){const o=document.createElement("p");o.textContent=t,e.append(o),window.scrollTo({top:n.scrollHeight-window.innerHeight,behavior:"smooth"})}s.onopen=()=>{a=!0},s.onclose=()=>{a=!1},s.onmessage=n=>{const a=JSON.parse(n.data);switch(a.command){case"setID":sessionStorage.setItem("userID",a.data);break;case"msg":c(a.data);break;case"input":!function(e,n){const o=`<form class="one-string-form" id="form">\n    <label for="input-data">${n}</label>\n    <input type="${e}" name = "input-data" class="input-data"></form>`;t.innerHTML=o;const a=document.querySelector("#form"),r=a.querySelector("input");r.focus(),a.addEventListener("submit",(e=>{e.preventDefault(),s.send(r.value),t.innerHTML=""}))}(a.type,a.data);break;case"loader":e.innerHTML="",function(e){if(e){const e='<p>Идет поиск собеседника <span class="roller"></span></p>';t.innerHTML=e;const n=document.querySelector(".roller");let a=0;setInterval((()=>{n.textContent=o[a],a=a<3?a+=1:0}),100)}else clearInterval(rollInterval),t.innerHTML=""}(a.data);break;default:c(a)}};
//# sourceMappingURL=client.2ef20613.js.map
