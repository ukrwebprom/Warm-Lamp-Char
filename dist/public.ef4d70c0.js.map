{"mappings":"AAAA,MAAMA,EAASC,SAASC,cAAc,WAEhCC,GADQF,SAASC,cAAc,UACnBD,SAASC,cAAc,qBACnCE,EAAOH,SAASC,cAAc,SAC9BG,EAAQJ,SAASC,cAAc,gBAC/BI,EAAYL,SAASC,cAAc,eAEzC,IAAIK,EAASC,eAAeC,QAAQ,UAEpC,MAAMC,EAAK,IAAIC,UAAU,iDAAiDJ,KAsC1E,SAASK,EAAaC,GAClB,MAAMC,EAAab,SAASc,cAAc,KAC1CD,EAAWE,YAAcH,EACzBb,EAAOiB,OAAOH,GACdI,OAAOC,SAAS,CACZC,IAAKjB,EAAUkB,aAAeH,OAAOI,YACrCC,SAAU,UAElB,CA5CAb,EAAGc,OAAS,KAERC,UAAW,CAAI,EAEnBf,EAAGgB,QAAU,KAETD,UAAW,CAAK,EAEpBf,EAAGiB,UAAYC,IACX,MAAMC,EAAOC,KAAKC,MAAMH,EAASI,MACjC,OAAQH,EAAKI,SACT,IAAK,QACDzB,eAAe0B,QAAQ,SAAUL,EAAKG,MAEtC,MAEJ,IAAK,MACDpB,EAAaiB,EAAKG,MAClB,MAEJ,IAAK,QACSH,EAAKM,KAyBEC,EAzBIP,EAAKG,KAkCjC3B,EAAkCW,YAAAoB,EACnC9B,EAAgB+B,QAlCR,MAEJ,IAAK,OACDnB,OAAOoB,SAASC,KAAO,+BACvB,MAEJ,QACI3B,EAAaiB,GAiBzB,IAA6BO,CAfzB,E,EA2BAI,iBAAkB,UAAAC,IACtBA,EAAAC,iBACAhC,EAAciC,KAAiBrC,EAAesC,OAC1CtC,EAAUsC,MAAK,M","sources":["src/js/pub-client.js"],"sourcesContent":["const output = document.querySelector(\"#output\");\r\nconst input = document.querySelector(\"#input\");\r\nconst mainframe = document.querySelector(\".chat-main-frame\");\r\nconst form = document.querySelector('#form');\r\nconst label = document.querySelector('.input-label');\r\nconst formField = document.querySelector('.input-data');\r\n\r\nlet userID = sessionStorage.getItem('userID');\r\n\r\nconst ws = new WebSocket(`ws://tranquil-reaches-58824.herokuapp.com/?id=${userID}`);\r\n\r\nws.onopen = () => {\r\n    //writeMessage(\"Произошло подключение к сереверу\");\r\n    isOnline = true;\r\n};\r\nws.onclose = () => {\r\n    //writeMessage(\"Произошло отключение от серевера\")\r\n    isOnline = false;\r\n};\r\nws.onmessage = response => {\r\n    const info = JSON.parse(response.data);\r\n    switch (info.command) {\r\n        case 'setID':\r\n            sessionStorage.setItem('userID', info.data);\r\n            //ws.send('ready');\r\n            break;\r\n\r\n        case 'msg':\r\n            writeMessage(info.data);\r\n            break;\r\n\r\n        case 'input':\r\n            inputData(info.type, info.data);\r\n            break;\r\n\r\n        case 'exit':\r\n            window.location.href = 'http://www.warmlampchat.fun/';\r\n            break;\r\n\r\n        default:\r\n            writeMessage(info);\r\n        break;\r\n    }\r\n\r\n    \r\n    }\r\n\r\nfunction writeMessage(n){\r\n    const staticLine = document.createElement(\"p\");\r\n    staticLine.textContent = n;\r\n    output.append(staticLine);\r\n    window.scrollTo({\r\n        top: mainframe.scrollHeight - window.innerHeight,\r\n        behavior: 'smooth'\r\n    });\r\n}\r\n\r\nfunction inputData(dataType, dataLabel) {\r\n/*     const formHtml = `<form class=\"one-string-form\" id=\"form\">\r\n    <label for=\"input-data\">${dataLabel}</label>\r\n    <input type=\"${dataType}\" name = \"input-data\" class=\"input-data\" autocomplete=\"off\"></form>`;\r\n    input.innerHTML = formHtml; */\r\n    label.textContent = dataLabel;\r\n    formField.focus();\r\n}\r\n\r\nform.addEventListener('submit', (e) => {\r\n    e.preventDefault();\r\n    ws.send(formField.value);\r\n    formField.value = '';\r\n})\r\ndocument.body.addEventListener('click', () => {\r\n    formField.focus();\r\n});"],"names":["$6a2dee04af0952d0$var$output","document","querySelector","$6a2dee04af0952d0$var$mainframe","$6a2dee04af0952d0$var$form","$6a2dee04af0952d0$var$label","$6a2dee04af0952d0$var$formField","$6a2dee04af0952d0$var$userID","sessionStorage","getItem","$6a2dee04af0952d0$var$ws","WebSocket","$6a2dee04af0952d0$var$writeMessage","n","staticLine","createElement","textContent","append","window","scrollTo","top","scrollHeight","innerHeight","behavior","onopen","isOnline","onclose","onmessage","response","info","JSON","parse","data","command","setItem","type","dataLabel","focus","location","href","addEventListener","e","preventDefault","send","value"],"version":3,"file":"public.ef4d70c0.js.map"}